<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ç–∞–ª–æ–≥ | BOTANICA</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .catalog-container {
            padding: 80px 20px 60px;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #A0BC87; 
            min-height: 100vh;
        }

        .catalog-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .catalog-header h1 {
            color: white;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .catalog-header p {
            color: white;
            font-size: 18px;
        }

        .search-filter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .search-box {
            position: relative;
            max-width: 400px;
            width: 100%;
        }

        .search-box .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            font-size: 18px;
        }

        #searchInput {
            width: 100%;
            padding: 14px 40px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchInput:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background-color: #eee;
            color: #333;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .product-info {
            padding: 20px;
            text-align: flex;
        }

        .product-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }

        .product-price {
            font-size: 18px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        
    .add-to-cart {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.3s;
    position: absolute;
    bottom: 50px;
    right: 20px;
}

.add-to-cart:hover {
    background-color: var(--accent-color);
}
</style>
</head>
<body class="catalog-page">

<!-- –®–∞–ø–∫–∞ -->
<header>
    <div class="container header-container">
        <a href="index.html" class="logo">BOTANICA</a>

        <nav>
            <ul>
                <li><a href="index.html#about">–û –Ω–∞—Å</a></li>
                <li><a href="katalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                <li><a href="index.html#delivery">–û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞</a></li>
                <li><a href="index.html#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            </ul>
        </nav>

        <div class="auth-cart">
            <a href="#" class="account-icon" id="accountIcon"></a>
            <a href="korzina.html" class="cart-icon">üõí<span class="cart-count">0</span></a>
        </div>
    </div>
</header>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ -->
<main class="catalog-container">
    <div class="catalog-header">
        <h1>–ù–∞—à –∫–∞—Ç–∞–ª–æ–≥ —Ü–≤–µ—Ç–æ–≤</h1>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—ã–π –±—É–∫–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ —Å–ª—É—á–∞—è</p>
    </div>

    <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <div class="search-filter-container">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
        </div>

        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
            <button class="filter-btn" data-filter="bouquet">–ë—É–∫–µ—Ç—ã</button>
            <button class="filter-btn" data-filter="box">–¶–≤–µ—Ç–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏</button>
            <button class="filter-btn" data-filter="bridal">–°–≤–∞–¥–µ–±–Ω—ã–µ –±—É–∫–µ—Ç—ã</button>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="products-grid" id="productsGrid">
        <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
    </div>
</main>

<!-- –ü–æ–¥–≤–∞–ª -->
<footer class="main-footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-logo">
                <a href="index.html" class="logo">BOTANICA</a>
            </div>
            <div class="footer-slogan">
                <p>–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ —Ü–≤–µ—Ç—ã —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –æ—Ç 2500‚ÇΩ –¥–ª—è –í–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö</p>
            </div>
            <div class="footer-contacts">
                <div class="contact-item phone">
                    <a href="tel:+79393359635">+7 939 335 96 35</a>
                </div>
                <div class="contact-item email">
                    <a href="mailto:info@botanicalavka.ru">info@botanicalavka.ru</a>
                </div>
                <div class="contact-item address">
                    <span>—É–ª. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞ –¥.31 —Å.2</span>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
<div id="loginModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-close">&times;</div>
        <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
        <form id="loginForm">
            <div class="form-group">
                <input type="text" id="loginEmail" placeholder="Email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω" required>
            </div>
            <div class="form-group">
                <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
            </div>
            <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
            <div class="register-link">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="registr.html" class="register-text">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
            </div>
        </form>
    </div>
</div>

<script>
// === –ú–∞—Å—Å–∏–≤ –±—É–∫–µ—Ç–æ–≤ ===
const bouquets = [
    { id: 1, name: "–†–æ–º–∞–Ω—Ç–∏–∫–∞", price: 3200, image: "bouquet1.jpg", category: "bouquet" },
    { id: 2, name: "–ù–µ–∂–Ω–æ—Å—Ç—å", price: 2800, image: "bouquet2.jpg", category: "bouquet" },
    { id: 3, name: "–õ—é–∫—Å", price: 4500, image: "bouquet3.jpg", category: "box" },
    { id: 4, name: "–°–≤–∞–¥–µ–±–Ω—ã–π", price: 5200, image: "bouquet4.jpg", category: "bridal" },
    { id: 5, name: "–í–µ—Å–µ–Ω–Ω–∏–π", price: 2300, image: "bouquet5.jpg", category: "bouquet" },
    { id: 6, name: "–ú–∏–Ω–∏–º–∞–ª–∏–∑–º", price: 3800, image: "bouquet6.jpg", category: "box" }
];

// === –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–∫–µ—Ç–æ–≤ ===
function displayBouquets(list) {
    const container = document.querySelector('.products-grid');
    if (!container) return;

    container.innerHTML = '';
    list.forEach(b => {
        const div = document.createElement('div');
        div.className = 'product-card';
        div.innerHTML = `
            <img src="${b.image}" alt="${b.name}" class="product-image">
            <div class="product-info">
                <div class="product-title">${b.name}</div>
                <div class="product-price">${b.price} ‚ÇΩ</div>
                <button class="add-to-cart" data-id="${b.id}">+</button>
            </div>
        `;
        container.appendChild(div);
    });

    // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "+"
    document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', addToCart);
    });
}

// === –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ===
function checkAuth() {
    return localStorage.getItem('isLoggedIn') === 'true';
}

// === –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ / –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ ===
function updateAuthUI() {
    const accountIcon = document.getElementById("accountIcon");
    if (!accountIcon) return;

    if (checkAuth()) {
        // –ö–Ω–æ–ø–∫–∞ "–í—ã—Ö–æ–¥"
        accountIcon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 0 0 1-2-2V5a2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>`;
        accountIcon.title = "–í—ã–π—Ç–∏";
        accountIcon.onclick = function(e) {
            e.preventDefault();
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('pendingProductId');
                localStorage.removeItem('cart');
                updateAuthUI();
                window.location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            }
        };
    } else {
        // –ò–∫–æ–Ω–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
        accountIcon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>`;
        accountIcon.title = "–í–æ–π—Ç–∏";
        accountIcon.onclick = function(e) {
            e.preventDefault();
            openLoginModal();
        };
    }
}

// === –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É ===
function addToCart(e) {
    const id = parseInt(e.target.dataset.id);
    if (!checkAuth()) {
        e.preventDefault();
        openLoginModal(id);
        return;
    }

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const bouquet = bouquets.find(b => b.id === id);

    const existingItem = cart.find(item => item.id === id);
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        bouquet.quantity = 1;
        cart.push(bouquet);
    }

    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();

    e.target.textContent = '‚úì';
    e.target.style.backgroundColor = '#4CAF50';
    setTimeout(() => {
        e.target.textContent = '+';
        e.target.style.backgroundColor = 'var(--primary-color)';
    }, 1000);
}

// === –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ===
function filterBouquets() {
    const query = document.getElementById('searchInput')?.value.toLowerCase() || '';
    const filtered = bouquets.filter(b => b.name.toLowerCase().includes(query));
    displayBouquets(filtered);
}

// === –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã ===
function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
    document.querySelectorAll('.cart-count').forEach(el => {
        el.textContent = totalItems;
    });
}

// === –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ===
function openLoginModal(productId = null) {
    const loginModal = document.getElementById('loginModal');
    if (!loginModal) return;

    if (checkAuth()) return; // –ó–∞–ø—Ä–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞

    loginModal.style.display = 'flex';
    if (productId) localStorage.setItem('pendingProductId', productId);
}

// === –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ ===
function closeLoginModal() {
    const loginModal = document.getElementById('loginModal');
    if (loginModal) loginModal.style.display = 'none';
}

// === –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ ===
document.getElementById('loginForm')?.addEventListener('submit', function(e) {
    e.preventDefault();

    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;

    if (email && password) {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('userEmail', email);
        closeLoginModal();
        updateAuthUI();

        alert('–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏!');

        const pendingId = localStorage.getItem('pendingProductId');
        if (pendingId) {
            localStorage.removeItem('pendingProductId');
            const id = parseInt(pendingId);
            const addButton = document.querySelector(`.add-to-cart[data-id="${id}"]`);
            if (addButton) addButton.click();
        }

        if (window.location.pathname.includes('enter.html')) {
            window.location.href = 'index.html';
        }
    } else {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
    }
});

// === –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ —Ñ–æ—Ä–º—ã ===
document.getElementById('loginModal')?.addEventListener('click', function(e) {
    if (e.target === this) closeLoginModal();
});

// === –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ===
window.addEventListener('DOMContentLoaded', () => {
    updateAuthUI();
    updateCartCount();

    // –í–ê–ñ–ù–û ‚Äî –û–¢–°–Æ–î–ê –°–¢–ê–†–¢–£–ï–ú –†–ï–ù–î–ï–† –ë–£–ö–ï–¢–û–í
    displayBouquets(bouquets);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.getElementById('searchInput')?.addEventListener('input', filterBouquets);

    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function () {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            filterBouquets();
        });
    });

    document.querySelectorAll('.cart-icon').forEach(icon => {
        icon.addEventListener('click', function(e) {
            if (!checkAuth()) {
                e.preventDefault();
                openLoginModal();
            }
        });
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                const headerHeight = document.querySelector('header').offsetHeight;
                const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight + 20;
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
});
</script>

<!-- –°–∫—Ä–∏–ø—Ç -->
<script src="script.js"></script>
</body>
</html>